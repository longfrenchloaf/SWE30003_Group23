{% extends "layout.html" %}
{% block title %}{{ title }}{% endblock %}

{% block content %}
<div class="container card p-4 mt-4 shadow-sm">
    <h2 class="mb-3 text-success"><i class="fas fa-check-circle me-2"></i>{{ title }}</h2>
    <div class="alert alert-success">
        Order <strong>{{ order_id }}</strong> and its active items have been successfully cancelled.
    </div>

    <h4>Cancelled Items:</h4>
    {% if cancelled_items_log %}
        <ul class="list-group mb-3">
        {% for item in cancelled_items_log %}
            <li class="list-group-item">
                {{ item.quantity }} x <strong>{{ item.name }}</strong> (Type: {{ item.type.capitalize() }})
            </li>
        {% endfor %}
        </ul>
        <p class="alert alert-info small">If this order was paid, a refund has been processed (simulated).</p>
    {% else %}
        <p>No specific items were logged as cancelled (this might indicate an issue or no active items were present).</p>
    {% endif %}

    <div class="mt-4">
        <a href="{{ url_for('order.view_order', order_id=order_id) }}" class="btn btn-primary me-2"><i class="fas fa-eye me-1"></i>View Updated Order</a>
        <a href="{{ url_for('order.list_orders') }}" class="btn btn-info me-2"><i class="fas fa-list me-1"></i>My Orders</a>
        <a href="{{ url_for('home.index') }}" class="btn btn-secondary"><i class="fas fa-home me-1"></i>Back to Home</a>
    </div>
</div>
{% endblock %}